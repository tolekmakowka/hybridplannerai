<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>HybridPlanner — Plany treningowe z AI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --brown:#3E2723; --white:#FFFFFF; --beige:#8D8C87;
  --text:#EDEDEA; --muted:#C9C7C2; --bg:#0F0F0F; --card:#1B1B1B;
  --border:#2A2A2A; --radius:16px; --shadow:0 12px 40px rgba(0,0,0,.4);
  --maxw:1200px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--text)}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}
h1{font:700 44px/1.15 Poppins;margin:0 0 12px}
h2{font:700 34px/1.2 Poppins;margin:0 0 12px;color:#111}
h3{font:600 20px/1.3 Poppins;margin:0 0 8px}
p{font:400 16px/1.6 Inter;margin:0}

/* Scroll container = MAIN */
main{height:100vh;overflow-y:auto;scroll-snap-type:y mandatory;scroll-behavior:smooth}
section.snap{min-height:100vh;scroll-snap-align:start;position:relative;display:flex;align-items:center}
.container{max-width:var(--maxw);margin:0 auto;padding:0 24px;width:100%}

/* Preloader na każdej sekcji */
.pre{position:absolute;inset:0;display:grid;place-items:center;z-index:3;pointer-events:none;opacity:0;transition:opacity .35s}
.pre.dark{background:rgba(0,0,0,.55)}
.pre.light{background:rgba(255,255,255,.9)}
.loader{display:flex;gap:8px}
.dot{width:8px;height:8px;border-radius:50%;animation:bounce .9s infinite ease-in-out}
.dark .dot{background:#fff}
.light .dot{background:var(--brown)}
.dot:nth-child(2){animation-delay:.15s}.dot:nth-child(3){animation-delay:.3s}
@keyframes bounce{0%,100%{transform:translateY(0);opacity:.4}50%{transform:translateY(-6px);opacity:1}}

/* Layouty i komponenty */
.grid-2{display:grid;grid-template-columns:1.1fr .9fr;gap:32px;align-items:center}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
.card-light{background:#fff;border:1px solid #EEE;border-radius:16px;padding:20px}
.round{border-radius:16px;border:1px solid var(--border);background:#1a1a1a}
.icon-dot{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.icon-dot img{width:22px;height:22px;object-fit:contain}

/* Hero (ciemny kontener) */
.hero-bg{width:100%;border-radius:24px;border:1px solid var(--border);padding:28px;background:linear-gradient(180deg,#191919,#121212);box-shadow:var(--shadow);overflow:hidden;position:relative}
.curves{position:absolute;inset:0;pointer-events:none;opacity:.25}
.curves svg{width:100%;height:100%}
.kicker{display:inline-block;padding:6px 10px;border:1px solid var(--border);border-radius:10px;font:600 13px/1 Inter;color:#C9C7C2;margin-bottom:14px}
.hero-copy p{color:#C9C7C2}
.right-stack{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.right-stack .wide{grid-column:1/-1;position:relative}
.bigcta{position:absolute;inset:0;display:grid;place-items:center;font:700 clamp(34px, 6vw, 72px)/1 Poppins;color:rgba(255,255,255,.12);letter-spacing:.06em}

/* Białe sekcje */
.section-light{background:#fff;color:#111}
.section-light p{color:#5f5e5b}

/* Buttons */
.btn{display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:12px;border:2px solid var(--text);color:var(--text);background:transparent;font:600 16px/1 Inter;transition:.25s;cursor:pointer}
.btn:hover{transform:translateY(-1px)}
.btn-brown{background:var(--brown);border-color:var(--brown);color:#fff}
.btn-light{background:#fff;color:#111;border-color:#fff}

/* Animacje treści */
.reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease, transform .6s ease}
.reveal.show{opacity:1;transform:none}
.reveal-stagger > *{opacity:0;transform:translateY(16px)}
.reveal-stagger.show > *{animation:st .9s ease forwards}
.reveal-stagger.show > *:nth-child(1){animation-delay:.05s}
.reveal-stagger.show > *:nth-child(2){animation-delay:.15s}
.reveal-stagger.show > *:nth-child(3){animation-delay:.25s}
.reveal-stagger.show > *:nth-child(4){animation-delay:.35s}
@keyframes st{to{opacity:1;transform:none}}
.typewriter span{opacity:0;transition:opacity .08s}

/* Autoplay toggle */
.autoplay-toggle{position:fixed;right:16px;bottom:16px;z-index:50;background:#111;color:#fff;border:1px solid #333;padding:8px 12px;border-radius:10px;font:600 13px/1 Inter;cursor:pointer;opacity:.85}
.autoplay-toggle:hover{opacity:1}

/* JOIN HERE (Bytol 3) — szeroki */
.joinhere-card{
  grid-column: 1 / -1;
  height: 220px;
  width: 100%;
  position:relative;
  display:grid;
  place-items:center;
  border-radius:16px;
  border:1px solid var(--border);
  overflow:hidden;
  text-decoration:none;
  background:#141414;
}
.joinhere-card::before{
  content:"";
  position:absolute; inset:0;
  background: url('assets/Bytol3.jpg') center/cover no-repeat;
  opacity:.55;
  transition: opacity .25s ease, transform .25s ease, filter .25s ease;
}
.joinhere-text{
  position:relative;
  font:800 clamp(34px, 6vw, 72px)/1 Poppins;
  letter-spacing:.06em;
  text-transform:uppercase;
  color:rgba(255,255,255,.18);
  transition: color .25s ease, transform .25s ease;
}
.joinhere-card:hover::before{ opacity:.35; filter:saturate(1.05) }
.joinhere-card:hover .joinhere-text{ color:rgba(255,255,255,.92); transform:translateY(-1px) }
@media (max-width:640px){ .joinhere-card{ height:160px } }

/* FAQ */
.faq-list{display:grid;gap:14px;margin-top:14px}
.faq-list details{background:#fff;border:1px solid #EEE;border-radius:12px;padding:16px 18px}
.faq-list summary{font:600 16px/1.3 Poppins;cursor:pointer;outline:none}
.faq-list p{margin-top:10px;color:#5f5e5b}

/* EN toggle */
.lang-toggle{
  position:fixed; top:14px; right:14px; z-index:9999;
  background:#111; color:#fff; border:1px solid #333;
  padding:6px 10px; border-radius:10px; font:600 12px/1 Inter; text-decoration:none;
  opacity:.9
}
.lang-toggle:hover{opacity:1}

/* ========= MOBILE POLISH (dopisek) ========= */

/* stabilna wysokość viewportu na mobile */
section.snap{ min-height: 100svh; }

/* 2 kolumny na tablet */
@media (max-width: 900px){
  .grid-3{ grid-template-columns: repeat(2, 1fr); }
}

/* 1 kolumna i dopracowane proporcje na telefonie */
@media (max-width: 640px){
  .container{ padding: 0 16px; }

  /* większy odstęp między sekcjami features/pricing */
  #features .container { padding-bottom: 28px; }
  #pricing  .container { padding-top: 28px; }

  .hero-bg{ padding: 18px; border-radius: 14px; }
  .kicker{ font-size: 12px; }
  h1{ font-size: clamp(26px, 7vw, 34px); }
  h2{ font-size: 24px; }
  p{  font-size: 15px; }
  .btn{ padding: 10px 14px; font-size: 15px; border-radius: 10px; }

  .right-stack{ grid-template-columns: 1fr; gap: 12px; }
  .round{
    width: 100%;
    height: auto !important;
    aspect-ratio: 4 / 3;
    object-fit: cover;
  }

  .joinhere-card{ height: 140px; }
  .bigcta{ font-size: 28px; }

  .grid-3{ grid-template-columns: 1fr; gap: 16px; }
  .card-light{ padding: 16px; border-radius: 14px; }

  .autoplay-toggle{ bottom: 10px; right: 10px; padding: 6px 10px; font-size: 12px; }
  .lang-toggle{ top: 10px; right: 10px; padding: 5px 8px; font-size: 11px; }
}

/* ===== Scroll-driven image sequence (NOWE) ===== */
.scrolly{ position:relative; height: 400vh; width:100%; }
.scrolly .sticky{ position: sticky; top:0; height:100vh; overflow:hidden; }
.seq-canvas{ width:100%; height:100%; display:block; background:#000; }
.seq-overlay{ position:absolute; inset:0; pointer-events:none; }
.seq-box{
  position:absolute; max-width:480px;
  background:rgba(0,0,0,.55); color:#fff; border:1px solid #333;
  border-radius:14px; padding:14px 16px;
  opacity:0; transform:translateY(14px);
  transition:opacity .35s ease, transform .35s ease;
}
.seq-box.show{ opacity:1; transform:none; }
.seq-box.top-left{ top:10%; left:6%; }
.seq-box.center-right{ top:40%; right:6%; }
.seq-box.bottom-left{ bottom:10%; left:6%; }
@media (max-width: 640px){
  .seq-box{ max-width:86%; left:50% !important; right:auto !important;
    transform:translate(-50%, 14px); }
  .seq-box.show{ transform:translate(-50%, 0); }
  .seq-box.top-left{ top:8%; }
  .seq-box.center-right{ top:40%; }
  .seq-box.bottom-left{ bottom:8%; }
}
</style>
</head>
<body>

<!-- Przycisk EN/PL -->
<a id="langToggle" class="lang-toggle" href="?lang=en" aria-label="English version">EN</a>

<!-- Modal e-mail + zgoda -->
<div id="emailModal" aria-modal="true" role="dialog" style="position:fixed;inset:0;z-index:70;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center">
  <div class="box" style="background:#fff;color:#111;border-radius:16px;padding:22px;max-width:420px;width:92%;box-shadow:0 10px 40px rgba(0,0,0,.35)">
    <h3 style="margin-top:0">Dostęp do generatora</h3>
    <label for="gateEmail" style="display:block;font:600 14px/1.3 Inter;margin-bottom:6px">Twój e-mail</label>
    <input id="gateEmail" type="email" placeholder="np. imie@domena.com" autocomplete="email" required
           style="width:100%;padding:12px 12px;border-radius:10px;border:1px solid #DDD;font:400 15px/1.3 Inter">
    <div class="row" style="display:flex;align-items:flex-start;gap:10px;margin:12px 0">
      <input id="gateConsent" type="checkbox" required>
      <label for="gateConsent" style="margin:0">Wyrażam zgodę na przetwarzanie moich danych osobowych.</label>
    </div>
    <div style="margin-top:10px">
      <button id="gateConfirm" style="background:#3E2723;color:#fff;border:none;border-radius:12px;padding:10px 14px;font:600 14px;cursor:pointer">Kontynuuj</button>
      <button class="close" id="gateClose" type="button" style="background:#111;border:1px solid #333;color:#fff;border-radius:12px;padding:10px 14px;font:600 14px;cursor:pointer;margin-left:8px">Anuluj</button>
    </div>
    <p id="gateError" style="color:#b00020;margin-top:10px;display:none">Podaj poprawny e-mail i zaznacz zgodę.</p>
  </div>
</div>

<main id="main">

  <!-- 1) HERO -->
  <section class="snap">
    <div class="pre dark"><div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
    <div class="container">
      <div class="hero-bg">
        <div class="curves" aria-hidden="true">
          <svg viewBox="0 0 1200 500" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M-50 430C200 290 380 560 650 430C920 300 1040 380 1250 260" stroke="#2A2A2A" stroke-width="1.2"/>
            <path d="M-120 360C120 220 360 420 620 320C880 220 1040 320 1260 180" stroke="#2A2A2A" stroke-width="1.2"/>
            <path d="M-90 300C150 180 350 300 580 220C820 140 1030 220 1240 120" stroke="#2A2A2A" stroke-width="1.2"/>
          </svg>
        </div>

        <div class="grid-2">
          <div class="hero-copy">
            <span class="kicker reveal">HybridPlanner • AI</span>
            <h1 id="heroH1" class="typewriter" data-typer="Ty masz cele, dzięki nam stają się rzeczywistością."></h1>
            <p id="heroDesc" class="reveal" style="max-width:560px;margin-top:12px">
              Plan Treningowy (12 tygodni) lub Hybrydowy Plan Treningowy (4 tygodnie). Minimalna objętość, maksymalne efekty.
            </p>
            <div class="reveal" style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap">
              <a id="btnGenerate" class="btn btn-brown requires-email" href="generator.html">Wygeneruj</a>
              <a id="btnDetails" class="btn" href="#features">Zobacz szczegóły</a>
            </div>
            <p class="reveal" style="margin-top:10px;color:#a9a7a3;font-size:13px">To nie jest porada medyczna.</p>
          </div>

          <div class="right-stack reveal-stagger">
            <img class="round" src="assets/Bytol1.jpg" alt="Bytol 1" style="height:220px;object-fit:cover">
            <img class="round" src="assets/Bytol2.jpg" alt="Bytol 2" style="height:220px;object-fit:cover">
            <a href="#pricing" class="joinhere-card" aria-label="Przejdź do oferty — Join here">
              <span class="joinhere-text">JOIN HERE</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 1.5) SCROLL-SEQUENCE (NOWA SEKCJA) -->
  <section id="sequence" class="snap">
    <div class="scrolly">
      <div class="sticky">
        <canvas id="seqCanvas" class="seq-canvas" width="1920" height="1080" aria-label="Sekwencja obrazów"></canvas>
        <div class="seq-overlay">
          <div class="seq-box top-left" data-start="0" data-end="0.33">
            <h3 style="margin:0 0 6px">Personalizacja AI</h3>
            <p style="margin:0">Plan pod Twoje cele, poziom i sprzęt.</p>
          </div>
          <div class="seq-box center-right" data-start="0.33" data-end="0.66">
            <h3 style="margin:0 0 6px">Bezpieczna progresja</h3>
            <p style="margin:0">Odstępy 24–48 h, kontrola objętości.</p>
          </div>
          <div class="seq-box bottom-left" data-start="0.66" data-end="1">
            <h3 style="margin:0 0 6px">Podgląd + Plik Excel</h3>
            <p style="margin:0">Wynik trafia od razu na Twój e-mail.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 2) CO ZAWIERA PROGRAM -->
  <section id="features" class="snap section-light">
    <div class="pre light"><div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
    <div class="container">
      <h2 id="featuresTitle" class="reveal typewriter" data-typer="Co zawiera program"></h2>
      <div class="grid-3" style="margin-top:20px">
        <article class="card-light reveal">
          <div class="icon-dot">
            <img src="assets/trainer_10452493.svg" alt="Personalizacja AI"><strong>Personalizacja AI</strong>
          </div>
          <p>Dopasowanie do celu, poziomu, dostępnego czasu/tydzień i ograniczeń.</p>
        </article>
        <article class="card-light reveal">
          <div class="icon-dot">
            <img src="assets/gym_1025929.svg" alt="Bezpieczna progresja"><strong>Bezpieczna progresja</strong>
          </div>
          <p>24–48 h odstępu między ciężkimi bodźcami, deload, kontrola objętości.</p>
        </article>
        <article class="card-light reveal">
          <div class="icon-dot">
            <img src="assets/note_13552540.svg" alt="Podgląd i Plik Excel"><strong>Podgląd + Plik Excel</strong>
          </div>
          <p id="featPdfDesc">Plan wysyłany po wygenerowaniu na email w formacie pliku Excel.</p>
        </article>
        <article class="card-light reveal">
          <div class="icon-dot">
            <img src="assets/target_15023730.svg" alt="Indywidualny wybór dyscyplin"><strong>Indywidualny wybór dyscyplin</strong>
          </div>
          <p>Wybierz i łącz dyscypliny zgodnie z priorytetami i dostępnością.</p>
        </article>
        <article class="card-light reveal">
          <div class="icon-dot">
            <img src="assets/clipboard_15409277.svg" alt="Uniwersalne nazewnictwo ćwiczeń"><strong>Uniwersalne nazewnictwo ćwiczeń</strong>
          </div>
          <p>Ujednolicone nazwy w PL/EN – szybkie do rozpoznania i wyszukania.</p>
        </article>
        <article class="card-light reveal">
          <div class="icon-dot">
            <img src="assets/note_13552540.svg" alt="Dokładne rozplanowanie tygodnia"><strong>Dokładne rozplanowanie tygodnia treningowego</strong>
          </div>
          <p id="featWeekDesc">Tydzień ułożony dzień po dniu z rozmieszczeniem regeneracji i progresją.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- 3) OFERTA (2 karty) -->
  <section id="pricing" class="snap section-light">
    <div class="pre light"><div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
    <div class="container">
      <h2 id="offerTitle" class="reveal">Oferta</h2>
      <div class="grid-3" style="grid-template-columns:repeat(2,1fr);gap:24px;margin-top:20px">
        <article class="card-light reveal" style="display:flex;flex-direction:column;min-height:220px">
          <div>
            <h3>Plan Treningowy (12 tygodni)</h3>
            <p>Pełny plan z progresją i rozmieszczeniem regeneracji.</p>
          </div>
          <div style="margin-top:auto">
            <a class="btn btn-brown requires-email" href="generator.html#plan=A">Wygeneruj teraz</a>
          </div>
        </article>
        <article class="card-light reveal" style="display:flex;flex-direction:column;min-height:220px">
          <div>
            <h3>Hybrydowy Plan Treningowy (4 tygodnie)</h3>
            <p>Optymalne rozłożenie treningów wielu dyscyplin.</p>
          </div>
          <div style="margin-top:auto">
            <a class="btn btn-brown requires-email" href="generator.html#plan=B">Wygeneruj teraz</a>
          </div>
        </article>
      </div>

      <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:space-between;margin-top:24px">
        <small style="color:#6a6966">Minimalna objętość, maksymalne efekty.</small>
        <nav style="display:flex;gap:16px">
          <a id="legalPolicy" href="#" style="color:#6a6966">Polityka</a>
          <a id="legalTerms" href="#" style="color:#6a6966">Regulamin</a>
          <a id="legalContact" href="mailto:hello@hybridplanner.app" style="color:#6a6966">Kontakt</a>
          <a id="legalFaq" href="#faq" style="color:#6a6966">FAQ</a>
        </nav>
      </div>
    </div>
  </section>

  <!-- 4) FAQ -->
  <section id="faq" class="snap section-light">
    <div class="pre light"><div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>
    <div class="container">
      <h2 class="reveal">FAQ</h2>
      <div class="faq-list reveal-stagger">
        <details><summary>Jak powstaje mój plan?</summary><p>Plan generuje AI na podstawie Twoich odpowiedzi w krótkiej ankiecie. Uwzględniamy cel, poziom, sprzęt, czas oraz ewentualne ograniczenia.</p></details>
        <details><summary>Ile to trwa?</summary><p>Zwykle kilkanaście sekund od wysłania odpowiedzi. Otrzymujesz podgląd i plik Excel do pobrania.</p></details>
        <details><summary>Czy mogę trenować kilka dyscyplin w tygodniu?</summary><p>Tak. Hybrydowy Plan Treningowy ustawia tygodniowy rozkład tak, aby łączyć dyscypliny i zminimalizować ryzyko przeciążeń.</p></details>
        <details><summary>W jakim języku dostanę plan?</summary><p>Interfejs i pliki dostępne są w dwóch wersjach językowych: PL oraz EN.</p></details>
        <details><summary>Co jeśli mam kontuzję lub chorobę?</summary><p>To nie jest porada medyczna. Jeśli masz uraz lub wątpliwości zdrowotne, skonsultuj się z lekarzem lub fizjoterapeutą przed rozpoczęciem.</p></details>
        <details><summary>Nie mam pełnego dostępu do sprzętu. Czy plan zadziała?</summary><p>Tak. W ankiecie podajesz dostępny sprzęt, a AI dopasuje ćwiczenia i objętość do Twoich warunków.</p></details>
      </div>
    </div>
  </section>

</main>

<button id="autoBtn" class="autoplay-toggle" aria-pressed="true">Auto: ON</button>

<script>
/* ------- Typewriter + preloader + auto-scroll (30s) ------- */
function initTypewriter(el){
  if(!el || el.dataset.ready) return;
  const text = el.dataset.typer || "";
  el.dataset.ready = "1";
  el.innerHTML = [...text].map((ch,i)=>{
    if(ch === '\n' || ch === '\r'){ return '<br>'; }
    return `<span style="--i:${i}">${ch}</span>`;
  }).join('');
  requestAnimationFrame(()=> el.classList.add('start'));
}
const snaps = document.querySelectorAll('section.snap');
const io = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      const sec = entry.target;
      const pre = sec.querySelector('.pre');
      if(pre){ // tylko jeśli sekcja ma preloader
        if(!sec.dataset.loaded){
          pre.style.opacity = 1;
          setTimeout(()=>{
            pre.style.opacity = 0;
            sec.dataset.loaded = "1";
            sec.querySelectorAll('.reveal, .reveal-stagger').forEach(x=>x.classList.add('show'));
            sec.querySelectorAll('.typewriter').forEach(initTypewriter);
          }, 450);
        }else{
          sec.querySelectorAll('.reveal, .reveal-stagger').forEach(x=>x.classList.add('show'));
          sec.querySelectorAll('.typewriter').forEach(initTypewriter);
        }
      }else{
        sec.querySelectorAll('.reveal, .reveal-stagger').forEach(x=>x.classList.add('show'));
        sec.querySelectorAll('.typewriter').forEach(initTypewriter);
      }
    }
  });
},{threshold:0.55});
snaps.forEach(s=>io.observe(s));

let auto = true;
const btn = document.getElementById('autoBtn');
btn.addEventListener('click',()=>{
  auto = !auto;
  btn.textContent = 'Auto: ' + (auto ? 'ON' : 'OFF');
  btn.setAttribute('aria-pressed', String(auto));
});
const list = Array.from(snaps);
let idx = 0;
function advance(){
  if(!auto) return;
  idx = (idx + 1) % list.length;
  list[idx].scrollIntoView({behavior:'smooth', block:'start'});
}
setInterval(advance, 30000);

window.addEventListener('load', ()=>{
  snaps[0].querySelectorAll('.typewriter').forEach(initTypewriter);
  const pre = snaps[0].querySelector('.pre');
  if(pre){ pre.style.opacity = 1; setTimeout(()=> pre.style.opacity = 0, 450); }
});

/* ------- E-mail gate (modal + zgoda) ------- */
const modal = document.getElementById('emailModal');
const closeBtn = document.getElementById('gateClose');
const confirmBtn = document.getElementById('gateConfirm');
const emailInput = document.getElementById('gateEmail');
const consent = document.getElementById('gateConsent');
const gateError = document.getElementById('gateError');

function showModal(){ modal.style.display='flex'; emailInput.focus(); }
function hideModal(){ modal.style.display='none'; }
if(closeBtn){ closeBtn.addEventListener('click', hideModal); }

function validEmail(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }

if(confirmBtn){
  confirmBtn.addEventListener('click', ()=>{
    gateError.style.display='none';
    const v = emailInput.value.trim();
    if(!validEmail(v) || !consent.checked){
      gateError.style.display='block';
      return;
    }
    localStorage.setItem('hp_email', v);
    localStorage.setItem('hp_consent','1');
    hideModal();
    window.location.href = 'generator.html';
  });
}

document.querySelectorAll('.requires-email').forEach(a=>{
  a.addEventListener('click', (e)=>{
    if(!localStorage.getItem('hp_email') || !localStorage.getItem('hp_consent')){
      e.preventDefault();
      showModal();
    }
  });
});
</script>

<!-- ===== Scroll-sequence logic (NOWE) ===== -->
<script>
(function(){
  const canvas = document.getElementById('seqCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');

  // Użyj swoich obrazów: podmień/rozszerz listę.
  const IMAGES = [
    'assets/Bytol1.jpg',
    'assets/Bytol2.jpg',
    'assets/Bytol3.jpg'
  ];

  const imgs=[]; let loaded=0;
  IMAGES.forEach((src,i)=>{
    const img = new Image();
    img.src = src;
    img.onload = ()=>{ imgs[i]=img; loaded++; if(loaded===1) draw(0); };
  });

  function draw(index){
    const img = imgs[Math.max(0, Math.min(IMAGES.length-1, index))];
    if(!img) return;
    const cw = canvas.width, ch = canvas.height;
    const iw = img.naturalWidth || img.width, ih = img.naturalHeight || img.height;
    const s = Math.max(cw/iw, ch/ih);
    const sw = iw*s, sh = ih*s;
    const dx = (cw - sw)/2, dy = (ch - sh)/2;
    ctx.clearRect(0,0,cw,ch);
    ctx.drawImage(img, dx, dy, sw, sh);
  }

  const section = document.getElementById('sequence');
  const scrolly = section.querySelector('.scrolly');
  const boxes = Array.from(section.querySelectorAll('.seq-box'));

  function progressInside(){
    const vh = window.innerHeight;
    const rect = section.getBoundingClientRect();
    const total = scrolly.offsetHeight - vh;
    const scrolled = Math.min(total, Math.max(0, -rect.top));
    return total>0 ? scrolled/total : 0;
  }

  function onResize(){
    const ratio = window.devicePixelRatio || 1;
    canvas.width = Math.floor(canvas.clientWidth * ratio);
    canvas.height = Math.floor(canvas.clientHeight * ratio);
    ctx.setTransform(1,0,0,1,0,0);
    draw(0);
    onScroll();
  }

  function onScroll(){
    const p = progressInside(); // 0..1
    const idx = Math.round(p * (IMAGES.length-1));
    draw(idx);
    boxes.forEach(b=>{
      const a = parseFloat(b.dataset.start || '0');
      const z = parseFloat(b.dataset.end || '1');
      b.classList.toggle('show', p >= a && p < z);
    });
  }

  window.addEventListener('resize', onResize);
  window.addEventListener('scroll', onScroll, {passive:true});
  onResize();
})();
</script>

<!-- ------- Mini i18n: EN/PL toggle (pełne tłumaczenie) ------- -->
<script>
(function () {
  const params = new URLSearchParams(location.search);
  const lang = (params.get('lang') || localStorage.getItem('hp_lang') || 'pl').toLowerCase();

  const setHTML = (id, val) => { const el = document.getElementById(id); if (el && val) el.innerHTML = val; };
  const setText  = (id, val) => { const el = document.getElementById(id); if (el && val) el.textContent = val; };
  const toggleBtn = document.getElementById('langToggle');

  const heroDisclaimer = document.querySelector('.hero-copy p:last-of-type');
  const featuresCards = document.querySelectorAll('#features .card-light');
  const offerCards = document.querySelectorAll('#pricing .card-light');
  const pricingSmall = document.querySelector('#pricing small');
  const pricingButtons = document.querySelectorAll('#pricing .card-light .requires-email');

  const modal = document.getElementById('emailModal');
  const modalH3 = modal ? modal.querySelector('h3') : null;
  const labelEmail = modal ? modal.querySelector('label[for="gateEmail"]') : null;
  const labelConsent = modal ? modal.querySelector('label[for="gateConsent"]') : null;
  const gateConfirm = document.getElementById('gateConfirm');
  const gateClose = document.getElementById('gateClose');
  const gateError = document.getElementById('gateError');

  const faqDetails = document.querySelectorAll('#faq details');

  if (lang === 'en') {
    setHTML('heroH1', 'You set the goals — we make them real.');
    setHTML('heroDesc', 'Training Plan (12 weeks) or Hybrid Training Plan (4 weeks). Minimum volume, maximum results.');
    setText('btnGenerate','Generate');
    setText('btnDetails','See details');
    if (heroDisclaimer) heroDisclaimer.textContent = 'This is not medical advice.';

    setText('featuresTitle','What’s included');
    if (featuresCards.length >= 6) {
      featuresCards[0].querySelector('.icon-dot strong').textContent = 'AI Personalization';
      featuresCards[0].querySelector('p').textContent = 'Tailored to your goal, level, available weekly time and constraints.';
      featuresCards[1].querySelector('.icon-dot strong').textContent = 'Safe progression';
      featuresCards[1].querySelector('p').textContent = '24–48 h spacing between hard stimuli, deloads and volume control';
      featuresCards[2].querySelector('.icon-dot strong').textContent = 'Preview + Excel file';
      featuresCards[2].querySelector('p').textContent = 'Your plan is emailed as an Excel file right after generation.';
      featuresCards[3].querySelector('.icon-dot strong').textContent = 'Custom discipline selection';
      featuresCards[3].querySelector('p').textContent = 'Pick and combine disciplines according to your priorities and availability.';
      featuresCards[4].querySelector('.icon-dot strong').textContent = 'Universal exercise naming';
      featuresCards[4].querySelector('p').textContent = 'Unified PL/EN names — easy to recognise and search.';
      featuresCards[5].querySelector('.icon-dot strong').textContent = 'Detailed weekly layout';
      featuresCards[5].querySelector('p').textContent = 'A week laid out day by day with recovery placement and progression.';
    }

    setText('offerTitle','Offer');
    if (offerCards.length >= 2) {
      offerCards[0].querySelector('h3').textContent = 'Training Plan (12 weeks)';
      offerCards[0].querySelector('p').textContent = 'Full program with progression and recovery placement.';
      offerCards[1].querySelector('h3').textContent = 'Hybrid Training Plan (4 weeks)';
      offerCards[1].querySelector('p').textContent = 'Optimal weekly schedule for multiple disciplines.';
    }
    pricingButtons.forEach(b => b.textContent = 'Generate now');
    if (pricingSmall) pricingSmall.textContent = 'Minimum volume, maximum results.';

    setText('legalPolicy','Policy');
    setText('legalTerms','Terms');
    setText('legalContact','Contact');
    setText('legalFaq','FAQ');

    if (modalH3) modalH3.textContent = 'Access to the generator';
    if (labelEmail) labelEmail.textContent = 'Your e-mail';
    if (labelConsent) labelConsent.textContent = 'I consent to the processing of my personal data.';
    if (gateConfirm) gateConfirm.textContent = 'Continue';
    if (gateClose) gateClose.textContent = 'Cancel';
    if (gateError) gateError.textContent = 'Enter a valid e-mail and tick the consent box.';

    if (faqDetails.length >= 6) {
      const map = [
        ['How is my plan created?', 'The plan is generated by AI based on your short questionnaire: goal, level, equipment, time and any constraints.'],
        ['How long does it take?', 'Usually a few seconds after submitting. You see a preview and receive an Excel file.'],
        ['Can I train multiple disciplines per week?', 'Yes. The Hybrid Training Plan arranges the week to combine disciplines while reducing overload risk.'],
        ['Which language will I get?', 'The interface and files are available in two languages: PL and EN.'],
        ['What if I have an injury or condition?', 'This is not medical advice. If you have an injury or doubts, consult a doctor or physiotherapist before you start.'],
        ['I lack full equipment. Will it work?', 'Yes. The AI adapts exercises and volume to whatever equipment you have.']
      ];
      map.forEach((arr, i) => {
        const [q, a] = arr, el = faqDetails[i];
        const sum = el.querySelector('summary'), p = el.querySelector('p');
        if (sum) sum.textContent = q;
        if (p) p.textContent = a;
      });
    }

    localStorage.setItem('hp_lang','en');
    if (toggleBtn){ toggleBtn.href='?lang=pl'; toggleBtn.textContent='PL'; toggleBtn.setAttribute('aria-label','Polish version'); }

    const h1 = document.getElementById('heroH1');
    if (h1 && h1.classList.contains('typewriter')) {
      h1.dataset.typer = 'You set the goals — we make them real.';
      h1.dataset.ready = ''; h1.innerHTML = '';
      if (typeof initTypewriter === 'function') initTypewriter(h1);
    }

  } else {
    localStorage.setItem('hp_lang','pl');
    if (toggleBtn){ toggleBtn.href='?lang=en'; toggleBtn.textContent='EN'; toggleBtn.setAttribute('aria-label','English version'); }

    setHTML('heroH1','Ty masz cele, dzięki nam stają się rzeczywistością.');
    setHTML('heroDesc','Plan Treningowy (12 tygodni) lub Hybrydowy Plan Treningowy (4 tygodnie). Minimalna objętość, maksymalne efekty.');
    setText('btnGenerate','Wygeneruj');
    setText('btnDetails','Zobacz szczegóły');

    setText('featuresTitle','Co zawiera program');
    if (featuresCards.length >= 6) {
      featuresCards[0].querySelector('.icon-dot strong').textContent = 'Personalizacja AI';
      featuresCards[0].querySelector('p').textContent = 'Dopasowanie do celu, poziomu, dostępnego czasu/tydzień i ograniczeń.';
      featuresCards[1].querySelector('.icon-dot strong').textContent = 'Bezpieczna progresja';
      featuresCards[1].querySelector('p').textContent = '24–48 h odstępu między ciężkimi bodźcami, deload, kontrola objętości.';
      featuresCards[2].querySelector('.icon-dot strong').textContent = 'Podgląd + Plik Excel';
      featuresCards[2].querySelector('p').textContent = 'Plan wysyłany po wygenerowaniu na email w formacie pliku Excel.';
      featuresCards[3].querySelector('.icon-dot strong').textContent = 'Indywidualny wybór dyscyplin';
      featuresCards[3].querySelector('p').textContent = 'Wybierz i łącz dyscypliny zgodnie z priorytetami i dostępnością.';
      featuresCards[4].querySelector('.icon-dot strong').textContent = 'Uniwersalne nazewnictwo ćwiczeń';
      featuresCards[4].querySelector('p').textContent = 'Ujednolicone nazwy w PL/EN – szybkie do rozpoznania i wyszukania.';
      featuresCards[5].querySelector('.icon-dot strong').textContent = 'Dokładne rozplanowanie tygodnia treningowego';
      featuresCards[5].querySelector('p').textContent = 'Tydzień ułożony dzień po dniu z rozmieszczeniem regeneracji i progresją.';
    }

    setText('offerTitle','Oferta');
    if (offerCards.length >= 2) {
      offerCards[0].querySelector('h3').textContent = 'Plan Treningowy (12 tygodni)';
      offerCards[0].querySelector('p').textContent = 'Pełny plan z progresją i rozmieszczeniem regeneracji.';
      offerCards[1].querySelector('h3').textContent = 'Hybrydowy Plan Treningowy (4 tygodnie)';
      offerCards[1].querySelector('p').textContent = 'Optymalne rozłożenie treningów wielu dyscyplin.';
    }
    pricingButtons.forEach(b => b.textContent = 'Wygeneruj teraz');
    if (pricingSmall) pricingSmall.textContent = 'Minimalna objętość, maksymalne efekty.';

    setText('legalPolicy','Polityka');
    setText('legalTerms','Regulamin');
    setText('legalContact','Kontakt');
    setText('legalFaq','FAQ');

    if (modalH3) modalH3.textContent = 'Dostęp do generatora';
    if (labelEmail) labelEmail.textContent = 'Twój e-mail';
    if (labelConsent) labelConsent.textContent = 'Wyrażam zgodę na przetwarzanie moich danych osobowych.';
    if (gateConfirm) gateConfirm.textContent = 'Kontynuuj';
    if (gateClose) gateClose.textContent = 'Anuluj';
    if (gateError) gateError.textContent = 'Podaj poprawny e-mail i zaznacz zgodę.';

    if (faqDetails.length >= 6) {
      const map = [
        ['Jak powstaje mój plan?', 'Plan generuje AI na podstawie Twoich odpowiedzi w krótkiej ankiecie. Uwzględniamy cel, poziom, sprzęt, czas oraz ewentualne ograniczenia.'],
        ['Ile to trwa?', 'Zwykle kilkanaście sekund od wysłania odpowiedzi. Otrzymujesz podgląd i plik Excel do pobrania.'],
        ['Czy mogę trenować kilka dyscyplin w tygodniu?', 'Tak. Hybrydowy Plan Treningowy ustawia tygodniowy rozkład tak, aby łączyć dyscypliny i zminimalizować ryzyko przeciążeń.'],
        ['W jakim języku dostanę plan?', 'Interfejs i pliki dostępne są w dwóch wersjach językowych: PL oraz EN.'],
        ['Co jeśli mam kontuzję lub chorobę?', 'To nie jest porada medyczna. Jeśli masz uraz lub wątpliwości zdrowotne, skonsultuj się z lekarzem lub fizjoterapeutą przed rozpoczęciem.'],
        ['Nie mam pełnego dostępu do sprzętu. Czy plan zadziała?', 'Tak. W ankiecie podajesz dostępny sprzęt, a AI dopasuje ćwiczenia i objętość do Twoich warunków.']
      ];
      map.forEach((arr, i) => {
        const [q, a] = arr, el = faqDetails[i];
        const sum = el.querySelector('summary'), p = el.querySelector('p');
        if (sum) sum.textContent = q;
        if (p) p.textContent = a;
      });
    }
  }
})();
</script>
</body>
</html>
